\hypertarget{class_chat_server}{}\doxysection{Chat\+Server Class Reference}
\label{class_chat_server}\index{ChatServer@{ChatServer}}


{\ttfamily \#include $<$Chat\+Server.\+h$>$}



Inheritance diagram for Chat\+Server\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{class_chat_server__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Chat\+Server\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{class_chat_server__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_chat_server_a5426ffa3e36479aa1ba8105f978dae1f}{Chat\+Server}} (boost\+::asio\+::io\+\_\+service \&io\+\_\+service, int port)
\item 
virtual \mbox{\hyperlink{class_chat_server_a08b180de1a6554e37f5a3e733d1255bf}{$\sim$\+Chat\+Server}} ()
\item 
void \mbox{\hyperlink{class_chat_server_a7d58d408cd66fdac5e6bb1c91fea9c63}{Init}} (boost\+::asio\+::io\+\_\+service \&io\+\_\+service, std\+::size\+\_\+t max\+Session\+Count, std\+::size\+\_\+t max\+Thread\+Count, std\+::size\+\_\+t max\+Room\+Count) override
\item 
bool \mbox{\hyperlink{class_chat_server_a3bdeaf5bd542b64cf69094a1a5a09be9}{Join\+Room}} (boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_session}{Session}} $>$ p\+Session, boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_room}{Room}} $>$ p\+Room, std\+::string param, std\+::string \&error)
\item 
std\+::list$<$ boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_room}{Room}} $>$ $>$ \mbox{\hyperlink{class_chat_server_ac66fc00c5a3a406422b870c1deee3473}{Get\+Room\+List}} ()
\item 
void \mbox{\hyperlink{class_server_acaea883b722927c7d8299a74447c8d1b}{Start}} ()
\item 
void \mbox{\hyperlink{class_server_a4ede6daea42d0873fb0c41e684167483}{Move\+Session\+To\+Queue}} (int session\+Id)
\item 
boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_session}{Session}} $>$ \mbox{\hyperlink{class_server_aeceac5d4947f7b3a4717393a2ae3e8da}{Get\+Session}} (int session\+Id)
\item 
std\+::vector$<$ boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_session}{Session}} $>$ $>$ \mbox{\hyperlink{class_server_afe15cfc50e76b738916eb2acd0c57024}{Get\+Session\+List}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_chat_server_a364e50283cecba38738d2570bda4bfbb}{On\+Accept}} (int session\+Id) override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::asio\+::ip\+::tcp\+::acceptor \mbox{\hyperlink{class_server_a39650737eda1744eaed8d21a6d60e779}{m\+\_\+\+Acceptor}}
\item 
std\+::vector$<$ boost\+::shared\+\_\+ptr$<$ boost\+::thread $>$ $>$ \mbox{\hyperlink{class_server_adf0e3925b409fe74efc50ab38546c293}{m\+\_\+\+Thread\+Pool}}
\item 
int \mbox{\hyperlink{class_server_a98153c796256baeb97c002c879ed61cc}{m\+\_\+\+Thread\+Pool\+Size}}
\item 
bool \mbox{\hyperlink{class_server_a9c31ac54364a8b7d4f788c6d9e404760}{m\+\_\+\+Is\+Accepting}}
\item 
std\+::vector$<$ boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_session}{Session}} $>$ $>$ \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\+\_\+\+Session\+List}}
\item 
std\+::deque$<$ int $>$ \mbox{\hyperlink{class_server_a57e44eb8fd843767a05b565d3efe0b90}{m\+\_\+\+Session\+Queue}}
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_server_ad1e6dcbd2e7db62dd9ef87e33f8c4b69}{Accept}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::list$<$ boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_room}{Room}} $>$ $>$ \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\+\_\+\+Room\+List}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 8 of file Chat\+Server.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_chat_server_a5426ffa3e36479aa1ba8105f978dae1f}\label{class_chat_server_a5426ffa3e36479aa1ba8105f978dae1f}} 
\index{ChatServer@{ChatServer}!ChatServer@{ChatServer}}
\index{ChatServer@{ChatServer}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{ChatServer()}{ChatServer()}}
{\footnotesize\ttfamily Chat\+Server\+::\+Chat\+Server (\begin{DoxyParamCaption}\item[{boost\+::asio\+::io\+\_\+service \&}]{io\+\_\+service,  }\item[{int}]{port }\end{DoxyParamCaption})}



Definition at line 11 of file Chat\+Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{12     : \mbox{\hyperlink{class_server_a7351104356303935152a859cfb0fb1b4}{Server}}(io\_service, port)}
\DoxyCodeLine{13 \{}
\DoxyCodeLine{14 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_chat_server_a08b180de1a6554e37f5a3e733d1255bf}\label{class_chat_server_a08b180de1a6554e37f5a3e733d1255bf}} 
\index{ChatServer@{ChatServer}!````~ChatServer@{$\sim$ChatServer}}
\index{````~ChatServer@{$\sim$ChatServer}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{$\sim$ChatServer()}{~ChatServer()}}
{\footnotesize\ttfamily Chat\+Server\+::$\sim$\+Chat\+Server (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Definition at line 16 of file Chat\+Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{17 \{}
\DoxyCodeLine{18 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_server_ad1e6dcbd2e7db62dd9ef87e33f8c4b69}\label{class_server_ad1e6dcbd2e7db62dd9ef87e33f8c4b69}} 
\index{ChatServer@{ChatServer}!Accept@{Accept}}
\index{Accept@{Accept}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{Accept()}{Accept()}}
{\footnotesize\ttfamily bool Server\+::\+Accept (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [inherited]}}



Definition at line 40 of file Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{41 \{}
\DoxyCodeLine{42     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_server_a57e44eb8fd843767a05b565d3efe0b90}{m\_SessionQueue}}.empty ())}
\DoxyCodeLine{43     \{}
\DoxyCodeLine{44         \mbox{\hyperlink{class_server_a9c31ac54364a8b7d4f788c6d9e404760}{m\_IsAccepting}} = \textcolor{keyword}{false};}
\DoxyCodeLine{45         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{46     \}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     \mbox{\hyperlink{class_server_a9c31ac54364a8b7d4f788c6d9e404760}{m\_IsAccepting}} = \textcolor{keyword}{true};}
\DoxyCodeLine{49     \textcolor{keywordtype}{int} sessionId = \mbox{\hyperlink{class_server_a57e44eb8fd843767a05b565d3efe0b90}{m\_SessionQueue}}.front ();}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     \mbox{\hyperlink{class_server_a57e44eb8fd843767a05b565d3efe0b90}{m\_SessionQueue}}.pop\_front ();}
\DoxyCodeLine{52     \mbox{\hyperlink{class_server_a39650737eda1744eaed8d21a6d60e779}{m\_Acceptor}}.async\_accept (\mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}[sessionId]-\/>Socket (),}
\DoxyCodeLine{53             boost::bind (\&\mbox{\hyperlink{class_server_a41a563c7a98b0232212faf7c530ebec5}{Server::OnAccept}},}
\DoxyCodeLine{54             \textcolor{keyword}{this},}
\DoxyCodeLine{55             sessionId,}
\DoxyCodeLine{56             boost::asio::placeholders::error)}
\DoxyCodeLine{57     );}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{60 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{class_server_ad1e6dcbd2e7db62dd9ef87e33f8c4b69_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_server_ad1e6dcbd2e7db62dd9ef87e33f8c4b69_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_chat_server_ac66fc00c5a3a406422b870c1deee3473}\label{class_chat_server_ac66fc00c5a3a406422b870c1deee3473}} 
\index{ChatServer@{ChatServer}!GetRoomList@{GetRoomList}}
\index{GetRoomList@{GetRoomList}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{GetRoomList()}{GetRoomList()}}
{\footnotesize\ttfamily std\+::list$<$boost\+::shared\+\_\+ptr$<$\mbox{\hyperlink{class_room}{Room}}$>$ $>$ Chat\+Server\+::\+Get\+Room\+List (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 16 of file Chat\+Server.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{16 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}; \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_chat_server_ac66fc00c5a3a406422b870c1deee3473_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_server_aeceac5d4947f7b3a4717393a2ae3e8da}\label{class_server_aeceac5d4947f7b3a4717393a2ae3e8da}} 
\index{ChatServer@{ChatServer}!GetSession@{GetSession}}
\index{GetSession@{GetSession}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{GetSession()}{GetSession()}}
{\footnotesize\ttfamily boost\+::shared\+\_\+ptr$<$\mbox{\hyperlink{class_session}{Session}}$>$ Server\+::\+Get\+Session (\begin{DoxyParamCaption}\item[{int}]{session\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}



Definition at line 20 of file Server.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{20 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}[sessionId]; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_afe15cfc50e76b738916eb2acd0c57024}\label{class_server_afe15cfc50e76b738916eb2acd0c57024}} 
\index{ChatServer@{ChatServer}!GetSessionList@{GetSessionList}}
\index{GetSessionList@{GetSessionList}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{GetSessionList()}{GetSessionList()}}
{\footnotesize\ttfamily std\+::vector$<$boost\+::shared\+\_\+ptr$<$\mbox{\hyperlink{class_session}{Session}}$>$ $>$ Server\+::\+Get\+Session\+List (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}



Definition at line 21 of file Server.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{21 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_chat_server_a7d58d408cd66fdac5e6bb1c91fea9c63}\label{class_chat_server_a7d58d408cd66fdac5e6bb1c91fea9c63}} 
\index{ChatServer@{ChatServer}!Init@{Init}}
\index{Init@{Init}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{Init()}{Init()}}
{\footnotesize\ttfamily void Chat\+Server\+::\+Init (\begin{DoxyParamCaption}\item[{boost\+::asio\+::io\+\_\+service \&}]{io\+\_\+service,  }\item[{std\+::size\+\_\+t}]{max\+Session\+Count,  }\item[{std\+::size\+\_\+t}]{max\+Thread\+Count,  }\item[{std\+::size\+\_\+t}]{max\+Room\+Count }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_server_a7db2d7aea554d9c3ab00449afd5af5bf}{Server}}.



Definition at line 20 of file Chat\+Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{21 \{}
\DoxyCodeLine{22     \mbox{\hyperlink{class_singleton_a32e9ccdbb5bdf4662cb8c1fd0c8d047a}{ChatODBCObject::Instance}} ()-\/>\mbox{\hyperlink{class_o_d_b_c_object_aa3abccee88c82fa9eadaa61722d5c2cd}{AddDatabase}}<\mbox{\hyperlink{class_my_sql_database}{MySqlDatabase}}>();}
\DoxyCodeLine{23     }
\DoxyCodeLine{24     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < maxSessionCount; ++i)}
\DoxyCodeLine{25     \{}
\DoxyCodeLine{26         boost::shared\_ptr<Session> pSession(\textcolor{keyword}{new} \mbox{\hyperlink{class_chat_session}{ChatSession}} (\textcolor{keyword}{this}, i, io\_service));}
\DoxyCodeLine{27         \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}.push\_back (pSession);}
\DoxyCodeLine{28         \mbox{\hyperlink{class_server_a57e44eb8fd843767a05b565d3efe0b90}{m\_SessionQueue}}.push\_back (i);}
\DoxyCodeLine{29     \}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < maxRoomCount; ++i) \{}
\DoxyCodeLine{32         boost::shared\_ptr<Room> pRoom (\textcolor{keyword}{new} \mbox{\hyperlink{class_room}{Room}}(io\_service));}
\DoxyCodeLine{33         \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}.push\_back (pRoom);}
\DoxyCodeLine{34     \}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < maxThreadCount; ++i) \{}
\DoxyCodeLine{37         boost::shared\_ptr<boost::thread> thread (}
\DoxyCodeLine{38             \textcolor{keyword}{new} boost::thread (boost::bind (\&boost::asio::io\_service::run, \&io\_service))}
\DoxyCodeLine{39         );}
\DoxyCodeLine{40         \mbox{\hyperlink{class_server_adf0e3925b409fe74efc50ab38546c293}{m\_ThreadPool}}.push\_back (thread);}
\DoxyCodeLine{41     \}}
\DoxyCodeLine{42 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{class_chat_server_a7d58d408cd66fdac5e6bb1c91fea9c63_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{class_chat_server_a7d58d408cd66fdac5e6bb1c91fea9c63_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_chat_server_a3bdeaf5bd542b64cf69094a1a5a09be9}\label{class_chat_server_a3bdeaf5bd542b64cf69094a1a5a09be9}} 
\index{ChatServer@{ChatServer}!JoinRoom@{JoinRoom}}
\index{JoinRoom@{JoinRoom}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{JoinRoom()}{JoinRoom()}}
{\footnotesize\ttfamily bool Chat\+Server\+::\+Join\+Room (\begin{DoxyParamCaption}\item[{boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_session}{Session}} $>$}]{p\+Session,  }\item[{boost\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_room}{Room}} $>$}]{p\+Room,  }\item[{std\+::string}]{param,  }\item[{std\+::string \&}]{error }\end{DoxyParamCaption})}



Definition at line 44 of file Chat\+Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{45 \{}
\DoxyCodeLine{46     \textcolor{keywordflow}{if} (param.empty ()) \{}
\DoxyCodeLine{47         error.append (\textcolor{stringliteral}{">You must send a room title."});}
\DoxyCodeLine{48         error.append (\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});}
\DoxyCodeLine{49         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{50     \}}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     \textcolor{keyword}{auto} iter = \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}.begin ();}
\DoxyCodeLine{53     \textcolor{keywordflow}{for} (iter; iter != \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}.end (); ++iter) \{}
\DoxyCodeLine{54         \textcolor{keywordflow}{if} (param == iter-\/>get ()-\/>GetRoomName ()) \{}
\DoxyCodeLine{55             \textcolor{keywordflow}{break};}
\DoxyCodeLine{56         \}}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keywordflow}{if} (iter == \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}.end ()) \{}
\DoxyCodeLine{60         iter = \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}.begin ();}
\DoxyCodeLine{61         \textcolor{keywordflow}{for} (iter; iter != \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}.end (); ++iter) \{}
\DoxyCodeLine{62             \textcolor{keywordflow}{if} (\textcolor{keyword}{true} == iter-\/>get ()-\/>IsEmpty ()) \{}
\DoxyCodeLine{63                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{64             \}}
\DoxyCodeLine{65         \}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67         \textcolor{keywordflow}{if} (iter != \mbox{\hyperlink{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}{m\_RoomList}}.end ()) \{}
\DoxyCodeLine{68             iter-\/>get()-\/>SetRoomName (param);}
\DoxyCodeLine{69             iter-\/>get()-\/>AddUser (pSession);}
\DoxyCodeLine{70         \}}
\DoxyCodeLine{71         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{72             error.append (\textcolor{stringliteral}{">This server can't make a room anymore."});}
\DoxyCodeLine{73             error.append (\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});}
\DoxyCodeLine{74             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{75         \}}
\DoxyCodeLine{76     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{77         \textcolor{keywordflow}{if} (ROOM::MAX\_USER\_COUNT <= iter-\/>get()-\/>GetUserList ().size ()) \{}
\DoxyCodeLine{78             error.append (\textcolor{stringliteral}{">Room is full."});}
\DoxyCodeLine{79             error.append (\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});}
\DoxyCodeLine{80             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{81         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{82             iter-\/>get ()-\/> AddUser (pSession);}
\DoxyCodeLine{83         \}}
\DoxyCodeLine{84     \}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     std::string msg;}
\DoxyCodeLine{87     msg.append (\textcolor{stringliteral}{">Welcome to "});}
\DoxyCodeLine{88     msg.append (iter-\/>get ()-\/>GetRoomName());}
\DoxyCodeLine{89     msg.append (\textcolor{stringliteral}{"Room, there are "});}
\DoxyCodeLine{90     msg.append (std::to\_string(iter-\/>get()-\/>GetUserList().size()));}
\DoxyCodeLine{91     msg.append (\textcolor{stringliteral}{" user connected."});}
\DoxyCodeLine{92     msg.append (\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});}
\DoxyCodeLine{93     std::queue<std::string> tmpQueue (iter-\/>get ()-\/>GetMessageQueue ());}
\DoxyCodeLine{94     \textcolor{keywordflow}{while} (!tmpQueue.empty ()) \{}
\DoxyCodeLine{95         msg.append(tmpQueue.front ());}
\DoxyCodeLine{96         tmpQueue.pop ();}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98     msg.append (\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     boost::dynamic\_pointer\_cast<ChatSession>(pSession)-\/>SetRoom (*iter);}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     pSession-\/>Send (\textcolor{keyword}{false}, msg.length (), msg.c\_str());}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{105 \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_chat_server_a3bdeaf5bd542b64cf69094a1a5a09be9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_server_a4ede6daea42d0873fb0c41e684167483}\label{class_server_a4ede6daea42d0873fb0c41e684167483}} 
\index{ChatServer@{ChatServer}!MoveSessionToQueue@{MoveSessionToQueue}}
\index{MoveSessionToQueue@{MoveSessionToQueue}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{MoveSessionToQueue()}{MoveSessionToQueue()}}
{\footnotesize\ttfamily void Server\+::\+Move\+Session\+To\+Queue (\begin{DoxyParamCaption}\item[{int}]{session\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inherited]}}



Definition at line 25 of file Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{26 \{}
\DoxyCodeLine{27     BOOST\_LOG\_TRIVIAL (info) << \textcolor{stringliteral}{"Return to client connectin pool. SessionId: "} \(\backslash\)}
\DoxyCodeLine{28         << sessionID \(\backslash\)}
\DoxyCodeLine{29         << \textcolor{stringliteral}{" Nickname: "} \(\backslash\)}
\DoxyCodeLine{30         << \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}[sessionID]-\/>GetNickname ();}
\DoxyCodeLine{31     \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}[sessionID]-\/>Socket ().close ();}
\DoxyCodeLine{32     \mbox{\hyperlink{class_server_a57e44eb8fd843767a05b565d3efe0b90}{m\_SessionQueue}}.push\_back (sessionID);}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{keywordflow}{if} (\textcolor{keyword}{false} == \mbox{\hyperlink{class_server_a9c31ac54364a8b7d4f788c6d9e404760}{m\_IsAccepting}})}
\DoxyCodeLine{35     \{}
\DoxyCodeLine{36         \mbox{\hyperlink{class_server_ad1e6dcbd2e7db62dd9ef87e33f8c4b69}{Accept}} ();}
\DoxyCodeLine{37     \}}
\DoxyCodeLine{38 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_server_a4ede6daea42d0873fb0c41e684167483_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_server_a4ede6daea42d0873fb0c41e684167483_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_chat_server_a364e50283cecba38738d2570bda4bfbb}\label{class_chat_server_a364e50283cecba38738d2570bda4bfbb}} 
\index{ChatServer@{ChatServer}!OnAccept@{OnAccept}}
\index{OnAccept@{OnAccept}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{OnAccept()}{OnAccept()}}
{\footnotesize\ttfamily void Chat\+Server\+::\+On\+Accept (\begin{DoxyParamCaption}\item[{int}]{session\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_server_ac8f5373a9fb77ca433812d20b03b8135}{Server}}.



Definition at line 107 of file Chat\+Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{108 \{}
\DoxyCodeLine{109     \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}[sessionId]-\/>SetDispatcher (\textcolor{keyword}{new} \mbox{\hyperlink{class_lobby_packet_dispatcher}{LobbyPacketDispatcher}} ());}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     std::string msg;}
\DoxyCodeLine{112     msg.append (\textcolor{stringliteral}{">Provide Auth Token."});}
\DoxyCodeLine{113     msg.append (\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});}
\DoxyCodeLine{114     \mbox{\hyperlink{class_server_a6bbcbefaaf812e56441d0ec5301cc777}{m\_SessionList}}[sessionId]-\/>Send (\textcolor{keyword}{false}, msg.length(), msg.c\_str());}
\DoxyCodeLine{115 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_server_acaea883b722927c7d8299a74447c8d1b}\label{class_server_acaea883b722927c7d8299a74447c8d1b}} 
\index{ChatServer@{ChatServer}!Start@{Start}}
\index{Start@{Start}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{Start()}{Start()}}
{\footnotesize\ttfamily void Server\+::\+Start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inherited]}}



Definition at line 16 of file Server.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{17 \{}
\DoxyCodeLine{18     \mbox{\hyperlink{class_server_ad1e6dcbd2e7db62dd9ef87e33f8c4b69}{Accept}} ();}
\DoxyCodeLine{19     BOOST\_LOG\_TRIVIAL (info) << \textcolor{stringliteral}{"Start thread pool."};}
\DoxyCodeLine{20     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < \mbox{\hyperlink{class_server_adf0e3925b409fe74efc50ab38546c293}{m\_ThreadPool}}.size(); ++i) \{}
\DoxyCodeLine{21         \mbox{\hyperlink{class_server_adf0e3925b409fe74efc50ab38546c293}{m\_ThreadPool}}[i]-\/>join ();}
\DoxyCodeLine{22     \}}
\DoxyCodeLine{23 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_server_acaea883b722927c7d8299a74447c8d1b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=225pt]{class_server_acaea883b722927c7d8299a74447c8d1b_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_server_a39650737eda1744eaed8d21a6d60e779}\label{class_server_a39650737eda1744eaed8d21a6d60e779}} 
\index{ChatServer@{ChatServer}!m\_Acceptor@{m\_Acceptor}}
\index{m\_Acceptor@{m\_Acceptor}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{m\_Acceptor}{m\_Acceptor}}
{\footnotesize\ttfamily boost\+::asio\+::ip\+::tcp\+::acceptor Server\+::m\+\_\+\+Acceptor\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 31 of file Server.\+h.

\mbox{\Hypertarget{class_server_a9c31ac54364a8b7d4f788c6d9e404760}\label{class_server_a9c31ac54364a8b7d4f788c6d9e404760}} 
\index{ChatServer@{ChatServer}!m\_IsAccepting@{m\_IsAccepting}}
\index{m\_IsAccepting@{m\_IsAccepting}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{m\_IsAccepting}{m\_IsAccepting}}
{\footnotesize\ttfamily bool Server\+::m\+\_\+\+Is\+Accepting\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 34 of file Server.\+h.

\mbox{\Hypertarget{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}\label{class_chat_server_a4c78ae9b648d45783c0f6bf52732e166}} 
\index{ChatServer@{ChatServer}!m\_RoomList@{m\_RoomList}}
\index{m\_RoomList@{m\_RoomList}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{m\_RoomList}{m\_RoomList}}
{\footnotesize\ttfamily std\+::list$<$boost\+::shared\+\_\+ptr$<$\mbox{\hyperlink{class_room}{Room}}$>$ $>$ Chat\+Server\+::m\+\_\+\+Room\+List\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 19 of file Chat\+Server.\+h.

\mbox{\Hypertarget{class_server_a6bbcbefaaf812e56441d0ec5301cc777}\label{class_server_a6bbcbefaaf812e56441d0ec5301cc777}} 
\index{ChatServer@{ChatServer}!m\_SessionList@{m\_SessionList}}
\index{m\_SessionList@{m\_SessionList}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{m\_SessionList}{m\_SessionList}}
{\footnotesize\ttfamily std\+::vector$<$boost\+::shared\+\_\+ptr$<$\mbox{\hyperlink{class_session}{Session}}$>$ $>$ Server\+::m\+\_\+\+Session\+List\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 35 of file Server.\+h.

\mbox{\Hypertarget{class_server_a57e44eb8fd843767a05b565d3efe0b90}\label{class_server_a57e44eb8fd843767a05b565d3efe0b90}} 
\index{ChatServer@{ChatServer}!m\_SessionQueue@{m\_SessionQueue}}
\index{m\_SessionQueue@{m\_SessionQueue}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{m\_SessionQueue}{m\_SessionQueue}}
{\footnotesize\ttfamily std\+::deque$<$int$>$ Server\+::m\+\_\+\+Session\+Queue\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 36 of file Server.\+h.

\mbox{\Hypertarget{class_server_adf0e3925b409fe74efc50ab38546c293}\label{class_server_adf0e3925b409fe74efc50ab38546c293}} 
\index{ChatServer@{ChatServer}!m\_ThreadPool@{m\_ThreadPool}}
\index{m\_ThreadPool@{m\_ThreadPool}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{m\_ThreadPool}{m\_ThreadPool}}
{\footnotesize\ttfamily std\+::vector$<$boost\+::shared\+\_\+ptr$<$boost\+::thread$>$ $>$ Server\+::m\+\_\+\+Thread\+Pool\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 32 of file Server.\+h.

\mbox{\Hypertarget{class_server_a98153c796256baeb97c002c879ed61cc}\label{class_server_a98153c796256baeb97c002c879ed61cc}} 
\index{ChatServer@{ChatServer}!m\_ThreadPoolSize@{m\_ThreadPoolSize}}
\index{m\_ThreadPoolSize@{m\_ThreadPoolSize}!ChatServer@{ChatServer}}
\doxysubsubsection{\texorpdfstring{m\_ThreadPoolSize}{m\_ThreadPoolSize}}
{\footnotesize\ttfamily int Server\+::m\+\_\+\+Thread\+Pool\+Size\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [inherited]}}



Definition at line 33 of file Server.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/\+Yun\+Jun/\+Documents/chat-\/server/\+Chat\+Server/\mbox{\hyperlink{_chat_server_8h}{Chat\+Server.\+h}}\item 
C\+:/\+Users/\+Yun\+Jun/\+Documents/chat-\/server/\+Chat\+Server/\mbox{\hyperlink{_chat_server_8cpp}{Chat\+Server.\+cpp}}\end{DoxyCompactItemize}
